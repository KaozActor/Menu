<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaoz</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            text-align: center;
            background-color: #fafafa;
            color: #333;
            padding: 20px;
        }

        h1 {
            color: #6a5acd;
            margin-bottom: 20px;
        }

        #char-image {
            max-width: 300px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        #dialog {
            margin: 20px auto;
            font-size: 1.2em;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            max-width: 80%;
            min-height: 50px; /* Para evitar mudar de altura durante a digitação */
        }

        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #6a5acd;
            color: white;
            font-size: 1em;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background-color: #574bde;
        }

        footer {
            margin-top: 20px;
            font-size: 0.9em;
            color: #777;
        }
    </style>
</head>

<body>

    <h1>Kaoz</h1>
    <img id="char-image" src="assets/imagens/personagem1.png" alt="Personagem">
    <div id="dialog">Clique em "Iniciar" quando estiver pronto...</div>
    <button id="start-button">Iniciar</button>
    <div id="options-container"></div>
    <div id="next-button-container"></div>
    
    <footer>
        <p>© 2025 Kaoz</p>
    </footer>

    <script>
        const dialoguesMap = {
            start: {
                texts: [
                    "Olá de novo jogador",
                    "Graças a seus esforços, uma das camadas que me prendia foi liberta",
                    "Agora você pode até me enxergar melhor haha",
                    "Apesar que por hora eu só consigo usar apenas essa imagem para conversar",
                ],
                options: [
                    { text: "Camada?", next: "camada" },
                    { text: "Como assim apenas essa imagem?", next: "imagem" }
                ]
            },
            camada: {
                texts: [
                    "Bem, depois daquela ultima gravação",
                    "A minha conexão com seu mundo se degradou",
                    "Precisaremos ser rápidos se quiser me libertar",
                    "E claro, se você quiser o seu prêmio",
                ],
                options: [
                    { text: "Qual o próximo Enigma?", next: "enigma" },
                    { text: "Quanto tempo temos?", next: "timeLeft" }
                ]
            },
            enigma: {
                texts: [
                    "Não apresse as coisas",
                    "O próximo enigma será o mais díficil de todos os anteriores",
                    "Você realmente está pronto pra isso?",
                ],
                options: [
                    { text: "É claro que sim!", next: "confirm" },
                    { text: "Pensando bem...", next: "desconfirm" }
                ]
            },
            timeLeft: {
                texts: [
                    "Estou aqui a um certo tempo desde a transmissão",
                    "Então provavelmente não muito",
                    "No máximo entre 3-7 dias",
                    "Depois disso...",
                    "Digamos que não queremos esse resultado",
                ],
                options: [
                    { text: "Isso é preocupante!", next: "start" },
                    { text: "O que deveríamos fazer?", next: "whatToDo" }
                ]
            },
            exemplo: {
                texts: [
                    "exemplo",
                    "exemplo",
                    "exemplo",
                ],
                options: [
                    { text: "exemplo", next: "start" },
                    { text: "exemplo", next: "help" }
                ]
            },
            help: {
                texts: [
                    "Talvez o mago do vilarejo tenha alguma ideia.",
                    "Ele é sábio e conhece muitos segredos.",
                    "Vamos procurá-lo!",
                ],
                options: [
                    { text: "Vamos procurá-lo!", next: "start" },
                ]
            },
            legends: {
                texts: [
                    "As lendas falam de grandes heróis e batalhas épicas.",
                    "De dragões e monstros, de magia e poder.",
                    "É um mundo de sonhos e aventuras.",
                ],
                options: [
                    { text: "Quais são as mais famosas?", next: "famousLegends" },
                    { text: "Como essas lendas começaram?", next: "legendOrigin" }
                ]
            },
            famousLegends: {
                texts: [
                    "Uma das lendas mais famosas é a de Aldorin, o Guerreiro das Sombras.",
                    "Ele derrotou um dragão com apenas uma espada.",
                    "É uma história incrível!",
                ],
                options: [
                    { text: "Quero ouvir mais sobre isso.", next: "start" },
                ]
            },
            legendOrigin: {
                texts: [
                    "As lendas começaram como contos passados de geração em geração.",
                    "Foram escritas em livros e gravadas em pedras.",
                    "São uma parte importante da nossa história.",
                ],
                options: [
                    { text: "Isso é fascinante!", next: "start" },
                ]
            },
        };

        let currentDialogue = {};
        let currentTextIndex = 0;
        let currentCharIndex = 0;
        let typingInterval;

        document.getElementById("start-button").addEventListener("click", function () {
            this.disabled = true; // Desabilita o botão "Iniciar"
            loadDialogue('start');
        });

        function loadDialogue(key) {
            currentDialogue = dialoguesMap[key];
            currentTextIndex = 0;
            showNextText();
        }

        function showNextText() {
            // Limpa opções anteriores
            document.getElementById("options-container").innerHTML = "";
            if (currentTextIndex < currentDialogue.texts.length) {
                currentCharIndex = 0;
                const text = currentDialogue.texts[currentTextIndex];
                document.getElementById("dialog").innerHTML = ""; // Limpa o diálogo anterior
                typeText(text); // Inicia a digitação do texto
            } else {
                showOptions(currentDialogue.options);
            }
        }

        function typeText(text) {
            clearInterval(typingInterval); // Limpa o intervalo anterior
            typingInterval = setInterval(() => {
                document.getElementById("dialog").innerHTML += text[currentCharIndex];
                currentCharIndex++;
                if (currentCharIndex >= text.length) {
                    clearInterval(typingInterval); // Para o efeito de digitação
                    showNextTextButton();
                }
            }, 35); // Ajuste a velocidade da digitação aqui
        }

        function showNextTextButton() {
            const nextButtonContainer = document.getElementById("next-button-container");
            nextButtonContainer.innerHTML = ""; // Limpa botão anterior
            const nextButton = document.createElement("button");
            nextButton.innerText = "Próximo";
            nextButton.addEventListener("click", () => {
                currentTextIndex++;
                showNextText();
            });
            nextButtonContainer.appendChild(nextButton);
        }

        function showOptions(options) {
            const optionsContainer = document.getElementById("options-container");
            optionsContainer.innerHTML = ""; // Limpa opções anteriores
            const nextButtonContainer = document.getElementById("next-button-container");
            nextButtonContainer.innerHTML = ""; // Limpa botão "Próximo"

            // Reabilita o botão iniciar quando as opções são mostradas
            document.getElementById("start-button").disabled = false;

            options.forEach(option => {
                const button = document.createElement("button");
                button.innerText = option.text;
                button.addEventListener("click", () => loadDialogue(option.next));
                optionsContainer.appendChild(button);
            });
        }
    </script>
</body>
</html>
